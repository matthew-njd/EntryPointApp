<app-nav></app-nav>

<div class="mt-16 sm:mt-40 max-w-4xl mx-auto px-4">
  @if (service.isLoading()) {
  <div class="flex justify-center items-center py-20">
    <span class="loading loading-spinner loading-xl"></span>
  </div>
  } @else if (service.error()) {
  <div class="alert alert-error mb-4">
    <span>{{ service.error() }}</span>
  </div>
  } @else {
  <button class="btn btn-primary btn-md" (click)="goBack()">Back</button>

  <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6 mt-6">
    <app-card title="Total Hours" value="{{ totalHours() }} hrs"></app-card>
    <app-card title="Total Mileage" value="{{ totalMileage() }} mi"></app-card>
    <app-card title="Total Charges" value="${{ totalCharges() }}"></app-card>
  </div>

  <div class="flex flex-col items-center">
    <div
      class="w-full overflow-x-auto overflow-y-auto mb-4 mt-4 rounded-box bg-base-300"
    >
      <table class="table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Hours</th>
            <th>Mileage</th>
            <th>Toll Charges</th>
            <th>Parking Fees</th>
            <th>Other Charges</th>
            <th>Comments</th>
          </tr>
        </thead>
        <tbody>
          @for (dailyLog of service.dailyLogs(); track dailyLog.id) {
          <tr>
            <td>{{ dailyLog.date | date : "EEE, MMM d, y" }}</td>
            <td>{{ dailyLog.hours }} hrs</td>
            <td>{{ dailyLog.mileage }} mi</td>
            <td>${{ dailyLog.tollCharge }}</td>
            <td>${{ dailyLog.parkingFee }}</td>
            <td>${{ dailyLog.otherCharges }}</td>
            <td>{{ dailyLog.comment || "-" }}</td>
          </tr>
          } @empty {
          <tr>
            <td colspan="7" class="text-center py-8">
              No dailylogs found for this week
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
  }
</div>
