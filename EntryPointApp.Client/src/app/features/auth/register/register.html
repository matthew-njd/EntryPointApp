<div class="mt-36">
  <h2 class="text-3xl text-center mb-4">EntryPoint, a Timesheet App</h2>
  <fieldset
    class="fieldset bg-base-200 border-base-300 rounded-box w-md mx-auto border p-4"
  >
    <legend class="fieldset-legend">Register</legend>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
      <label class="label">First Name*</label>
      <input
        type="text"
        class="input w-full"
        placeholder="First Name"
        formControlName="firstName"
        [class.input-error]="firstName?.invalid && firstName?.touched"
      />
      @if (firstName?.invalid && firstName?.touched) {
      <div class="text-error text-sm mt-1">
        <span>First name is required</span>
      </div>
      }

      <label class="label mt-4">Last Name*</label>
      <input
        type="text"
        class="input w-full"
        placeholder="Last Name"
        formControlName="lastName"
        [class.input-error]="lastName?.invalid && lastName?.touched"
      />
      @if (lastName?.invalid && lastName?.touched) {
      <div class="text-error text-sm mt-1">
        <span>Last name is required</span>
      </div>
      }

      <label class="label mt-4">Email*</label>
      <input
        type="email"
        class="input w-full"
        placeholder="Email"
        formControlName="email"
        [class.input-error]="email?.invalid && email?.touched"
      />
      @if (email?.invalid && email?.touched) {
      <div class="text-error text-sm mt-1">
        @if (email?.errors?.['required']) {
        <span>Email is required</span>
        } @if (email?.errors?.['email']) {
        <span>Invalid email format</span>
        }
      </div>
      }

      <label class="label mt-4">Password*</label>
      <input
        type="password"
        class="input w-full"
        placeholder="Password"
        formControlName="password"
        [class.input-error]="password?.invalid && password?.touched"
      />
      @if (password?.invalid && password?.touched) {
      <div class="text-error text-sm mt-1">
        <span>Password is required</span>
      </div>
      }

      <label class="label mt-4">Confirm Password*</label>
      <input
        type="password"
        class="input w-full"
        placeholder="Confirm Password"
        formControlName="confirmPassword"
        [class.input-error]="
          (confirmPassword?.invalid && confirmPassword?.touched) ||
          (registerForm.errors?.['passwordMismatch'] && confirmPassword?.touched)
        "
      />
      @if (confirmPassword?.touched) {
      <div class="text-error text-sm mt-1">
        @if (confirmPassword?.errors?.['required']) {
        <span>Please confirm your password</span>
        } @if (registerForm.errors?.['passwordMismatch'] &&
        !confirmPassword?.errors?.['required']) {
        <span>Passwords do not match</span>
        }
      </div>
      }

      <button
        type="submit"
        class="btn btn-neutral w-full mt-4"
        [disabled]="isLoading"
      >
        @if (isLoading) {
        <span class="loading loading-spinner loading-md"></span>
        Registering... } @else { Register }
      </button>
    </form>
  </fieldset>

  <div class="w-md mx-auto mt-2">
    <a
      class="btn btn-soft btn-xs btn-secondary"
      href="mailto:it@pcfsouvenirs.com"
      >Support</a
    >
  </div>
</div>
